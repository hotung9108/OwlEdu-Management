@using Microsoft.JSInterop
@inject IJSRuntime JSRuntime
<div>
    <input type="text" id="@PickerId" class="form-control datetimepicker" placeholder="@Placeholder" />
</div>

@code {
    [Parameter] public string PickerId { get; set; } = $"datetimepicker-{Guid.NewGuid()}";
    [Parameter] public string Placeholder { get; set; } = "Chọn ngày";
    [Parameter] public string DateFormat { get; set; } = "d/m/Y"; // Default: ngày/tháng/năm
    [Parameter] public EventCallback<string> OnDateSelected { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JSRuntime.InvokeVoidAsync("initializeFlatpickr", PickerId, DateFormat, OnDateSelected.HasDelegate);
        }
    }
}